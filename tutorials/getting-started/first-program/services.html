<!DOCTYPE html><html lang=en-us class=h-100><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property=og:type content=website><meta property=og:site_name content="Disqord Documentation"><meta property=og:locale content=en-us><title>Disqord - First Services</title><meta name=description content="Creating your first service."><meta property=og:title content="Disqord - First Services"><meta property=og:description content="Creating your first service."><link rel=stylesheet media=screen href=https://fontlibrary.org//face/fantasque-sans-mono><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/stackoverflow-dark.min.css><link rel=stylesheet href=/Disqord/assets/bootstrap.min.css><link rel=stylesheet href=/Disqord/assets/style.css><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js integrity=sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js></script><script src=https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js></script><script>hljs.highlightAll();</script><link rel=stylesheet href=/Disqord/assets/tutorials/style.css></head><body class="d-flex flex-column h-100"><header><nav class="navbar navbar-expand-sm navbar-dark bg-dark border-bottom border-dark"><div class=container><a class=navbar-brand href=/Disqord/index>Disqord</a> <button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navCollapse aria-controls=navCollapse aria-expanded=false aria-label="Toggle Navigation"> <span class=navbar-toggler-icon></span> </button><div class="collapse navbar-collapse" id=navCollapse><ul class="navbar-nav me-auto mb-2 mb-sm-0"><li class=nav-item><a class=nav-link href=/Disqord/tutorials>Tutorials</a></li></ul><ul class="navbar-nav ms-md-auto"><li class=nav-item><a target=_blank class=nav-link href=https://github.com/Quahu/Disqord><i class="bi bi-github"></i> GitHub</a></li><li class=nav-item><a target=_blank class=nav-link href=https://discord.gg/eUMSXGZ><i class="bi bi-discord"></i> Discord</a></li></ul></div></div></nav></header><div class=d-flex><div id=left-col class="col side-col sticky-top mh-100"><div id=tutorial-tree class="card sticky-top"><div class=card-body><h6 class="card-subtitle text-muted">Click on the arrows to expand sections.</h6><ul class="list-group list-group-flush"><li class=list-group-item><a class="btn btn-link collapse-button" data-bs-toggle=collapse href=/Disqord/tutorials/getting-started/first-program/services.html#collapse-62b5a832-7c93-4f51-a9bc-c02393b5325e role=button aria-expanded=true aria-controls=collapseExample> <i class="bi bi-chevron-down link-success"></i> </a> <a href=/Disqord/tutorials/getting-started> Getting Started </a><ul class="list-group list-group-flush collapse show" id=collapse-62b5a832-7c93-4f51-a9bc-c02393b5325e><li class=list-group-item><a class="btn btn-link collapse-button" data-bs-toggle=collapse href=/Disqord/tutorials/getting-started/first-program/services.html#collapse-4c530768-5e16-4394-b213-4a94fd16f23b role=button aria-expanded=false aria-controls=collapseExample> <i class="bi bi-chevron-right"></i> </a> <a href=/Disqord/tutorials/getting-started/environment> Environment </a><ul class="list-group list-group-flush collapse" id=collapse-4c530768-5e16-4394-b213-4a94fd16f23b><li class=list-group-item><a class="btn btn-link collapse-button" data-bs-toggle=collapse href=/Disqord/tutorials/getting-started/first-program/services.html#collapse-3fa0f0b7-0c60-4715-8d68-ce2c01a03818 role=button aria-expanded=false aria-controls=collapseExample> <i class="bi bi-chevron-right"></i> </a> <a href=/Disqord/tutorials/getting-started/environment/visual-studio> Visual Studio </a><ul class="list-group list-group-flush collapse" id=collapse-3fa0f0b7-0c60-4715-8d68-ce2c01a03818><li class=list-group-item><a href=/Disqord/tutorials/getting-started/environment/visual-studio/creating-solution> Creating the Solution </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/environment/visual-studio/adding-class> Adding a Class </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/environment/visual-studio/nuget> NuGet </a></li></ul></li></ul></li><li class=list-group-item><a class="btn btn-link collapse-button" data-bs-toggle=collapse href=/Disqord/tutorials/getting-started/first-program/services.html#collapse-c2aa1620-1fb5-4264-aa0b-5565b3402543 role=button aria-expanded=false aria-controls=collapseExample> <i class="bi bi-chevron-right"></i> </a> <a href=/Disqord/tutorials/getting-started/discord-application> Discord Application </a><ul class="list-group list-group-flush collapse" id=collapse-c2aa1620-1fb5-4264-aa0b-5565b3402543><li class=list-group-item><a href=/Disqord/tutorials/getting-started/discord-application/creating-bot> Creating the Bot </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/discord-application/intents> Intents </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/discord-application/inviting-bot> Inviting the Bot </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/discord-application/bot-token> Bot Token </a></li></ul></li><li class=list-group-item><a class="btn btn-link collapse-button" data-bs-toggle=collapse href=/Disqord/tutorials/getting-started/first-program/services.html#collapse-cc1d5533-2e39-4cdc-8b2e-da30d99e9e43 role=button aria-expanded=true aria-controls=collapseExample> <i class="bi bi-chevron-down link-success"></i> </a> <a href=/Disqord/tutorials/getting-started/first-program> First Program </a><ul class="list-group list-group-flush collapse show" id=collapse-cc1d5533-2e39-4cdc-8b2e-da30d99e9e43><li class=list-group-item><a href=/Disqord/tutorials/getting-started/first-program/commands> First Commands </a></li><li class=list-group-item><a href=/Disqord/tutorials/getting-started/first-program/services> <span class=link-success> First Services </span> </a></li></ul></li></ul></li><li class=list-group-item><a href=/Disqord/tutorials/commands> Commands </a></li></ul></div></div></div><main class="container w-50"><nav aria-label=breadcrumb><ol class="breadcrumb bg-dark"><li class=breadcrumb-item><a href=/Disqord/tutorials>Tutorials</a></li><li class=breadcrumb-item><a href=/Disqord/tutorials/getting-started>Getting Started</a></li><li class=breadcrumb-item><a href=/Disqord/tutorials/getting-started/first-program>First Program</a></li><li class="breadcrumb-item active">First Services</li></ol></nav><h3 id=creating-services>Creating Services</h3><p>Services are long-lived classes listening for events Discord sends via the gateway, i.e. classes that inherit <code>DiscordBotService</code>.</p><p><del>See more: xref</del></p><p>I called the class I made <code>HelloService</code>. The name can be anything and you can have as many services as you want.</p><p>Now, paste the following code in:</p><pre><code class=language-cs>using System;
using System.Linq;
using System.Threading.Tasks;
using Disqord;
using Disqord.Bot.Hosting;
using Disqord.Rest;

namespace MyBot
{
    // DiscordBotService is required to mark the class as a service.
    public class HelloService : DiscordBotService
    {
        // The phrases the service will respond to.
        private readonly string[] _phrases = { "hi", "hey", "hello" };

        // OnNonCommandReceived fires for messages that do not contain any of our prefixes etc.
        protected override async ValueTask OnNonCommandReceived(BotMessageReceivedEventArgs e)
        {
            // Ignores messages sent outside of guilds.
            // By default the bot ignores DMs anyways, but this is just an example.
            if (e.GuildId == null)
                return;

            // Ignores all system messages, e.g. pin or boost messages.
            if (e.Message is not IUserMessage)
                return;

            // Ignores messages sent by bots.
            // This also prevents the bot responding to itself infinitely.
            if (e.Message.Author.IsBot)
                return;

            // Ignores messages without any of the above defined phrases.
            if (!_phrases.Any(phrase =&gt; e.Message.Content.Contains(phrase, StringComparison.OrdinalIgnoreCase)))
                return;

            // Responds to the phrase by mentioning the author.
            await Bot.SendMessageAsync(e.ChannelId, new LocalMessage()
                .WithContent($"Hello, {e.Message.Author.Mention}!"));
        }
    }
}
</code></pre><p>This adds a basic service that responds to anyone saying <code>hi</code>, <code>hey</code>, or <code>hello</code>. Let's try it out! Boot up your bot and type any of the phrases in a channel.</p><p><img src=/Disqord/assets/tutorials/getting-started/first-program/services/hello.gif class=img-fluid alt=hello.gif></p><h5 class=next-up>Next up: <a href=/Disqord/tutorials/commands>Commands</a>.</h5><script src=/Disqord/assets/tutorials/jquery.js></script></main><div id=right-col class="col side-col"><div id=tutorial-tools><a class="nav-link disabled" href=https://github.com/Quahu/Disqord/tree/master/docs/tutorials/getting-started/first-program/services.md> <i class="bi bi-pen"></i> <strike> Edit on GitHub </strike> </a></div></div></div><footer class="footer mt-auto text-center"><div class=container><span class=text-muted>© 2021 • Quahu</span></div></footer><script src=/Disqord/assets/mobile.js></script><script src=/Disqord/assets/jquery.js></script><script src=/Disqord/assets/anchors.js></script></body></html>